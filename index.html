<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Roleta de Brindes</title>

<style>
*{box-sizing:border-box;}

body{
    margin:0;
    font-family:Arial, sans-serif;
    background:#f4f4f4;
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
}

#container{
    width:100%;
    max-width:500px;
    position:relative;
}

/* CANVAS */
canvas{
    width:100%;
    height:auto;
}

/* C√çRCULO CENTRAL */
#centro{
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    width:130px;
    height:130px;
    background:white;
    border-radius:50%;
    display:flex;
    justify-content:center;
    align-items:center;
    cursor:pointer;
    z-index:20;
    box-shadow:0 6px 20px rgba(0,0,0,0.25);
}

/* SETA INTEGRADA AO C√çRCULO */
#seta{
    position:absolute;
    top:115px;
    left:50%;
    transform:translateX(-50%);
    width:0;
    height:0;
    border-left:18px solid transparent;
    border-right:18px solid transparent;
    border-top:30px solid white;
}

#centro img{
    width:75%;
}

/* RESULTADO */
#overlay{
    position:fixed;
    inset:0;
    background:rgba(0,0,0,0.6);
    display:none;
    justify-content:center;
    align-items:center;
    z-index:100;
}

#resultadoBox{
    background:white;
    padding:30px;
    border-radius:20px;
    font-size:20px;
    font-weight:bold;
    text-align:center;
    animation:pop 0.3s ease;
}

#resultadoBox span{
    color:#ff4d4d;
    font-size:24px;
}

@keyframes pop{
    from{transform:scale(0.7);opacity:0;}
    to{transform:scale(1);opacity:1;}
}
</style>
</head>

<body>

<div id="container">

    <canvas id="roleta" width="500" height="500"></canvas>

    <div id="centro" onclick="girar()">
        <div id="seta"></div>
        <img src="logo.png" alt="Logo">
    </div>

</div>

<div id="overlay" onclick="fecharResultado()">
    <div id="resultadoBox"></div>
</div>

<script>
const canvas=document.getElementById("roleta");
const ctx=canvas.getContext("2d");
const overlay=document.getElementById("overlay");
const resultadoBox=document.getElementById("resultadoBox");

const produtos=[
"Produto 1","Produto 2","Produto 3","Produto 4","Produto 5",
"Produto 6","Produto 7","Produto 8","Produto 9","Produto 10","Produto 11"
];

const cores=[
"#FF5733","#33FF57","#3357FF","#FF33A8","#A833FF",
"#33FFF5","#FF8C33","#8CFF33","#FF3333","#33A8FF","#FFC300"
];

let anguloAtual=0;
let girando=false;

function desenharRoleta(){
    const total=produtos.length;
    const angulo=(2*Math.PI)/total;

    for(let i=0;i<total;i++){
        ctx.beginPath();
        ctx.moveTo(250,250);
        ctx.arc(250,250,250,i*angulo,(i+1)*angulo);
        ctx.fillStyle=cores[i%cores.length];
        ctx.fill();

        ctx.save();
        ctx.translate(250,250);
        ctx.rotate(i*angulo+angulo/2);
        ctx.textAlign="right";
        ctx.fillStyle="#fff";
        ctx.font="bold 16px Arial";
        ctx.fillText(produtos[i],230,10);
        ctx.restore();
    }
}

function girar(){
    if(girando) return;
    girando=true;

    const tempo=4000;
    const inicio=performance.now();
    const rotacaoExtra=Math.random()*2000+2000;

    function animar(agora){
        const decorrido=agora-inicio;
        const progresso=decorrido/tempo;

        if(progresso<1){
            anguloAtual=rotacaoExtra*easeOut(progresso);
            desenharComRotacao();
            requestAnimationFrame(animar);
        }else{
            girando=false;
            calcularResultadoReal();
        }
    }

    requestAnimationFrame(animar);
}

function desenharComRotacao(){
    ctx.clearRect(0,0,500,500);
    ctx.save();
    ctx.translate(250,250);
    ctx.rotate(anguloAtual*Math.PI/180);
    ctx.translate(-250,-250);
    desenharRoleta();
    ctx.restore();
}

function calcularResultadoReal(){
    const total=produtos.length;
    const anguloPorSetor=360/total;

    let graus=(anguloAtual%360+360)%360;

    graus=(360-graus+90)%360;

    const indice=Math.floor(graus/anguloPorSetor);

    resultadoBox.innerHTML=
    "üéâ PARAB√âNS!<br>Voc√™ ganhou:<br><span>"+produtos[indice]+"</span>";

    overlay.style.display="flex";
}

function fecharResultado(){
    overlay.style.display="none";
}

function easeOut(t){
    return 1-Math.pow(1-t,3);
}

desenharRoleta();
</script>

</body>
</html>
