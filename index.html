<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Roleta de Brindes</title>

<style>
* {
    box-sizing: border-box;
}

body {
    margin: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    font-family: Arial, sans-serif;
    background: #f4f4f4;
    padding: 20px;
}

#container {
    width: 100%;
    max-width: 500px;
    text-align: center;
    position: relative;
}

canvas {
    width: 100%;
    height: auto;
}

#seta {
    width: 0;
    height: 0;
    border-left: 18px solid transparent;
    border-right: 18px solid transparent;
    border-bottom: 35px solid #000;
    margin: 0 auto;
}

button {
    margin-top: 25px;
    padding: 16px;
    width: 100%;
    font-size: 18px;
    cursor: pointer;
    border: none;
    background: #ff4d4d;
    color: white;
    border-radius: 12px;
}

button:active {
    transform: scale(0.97);
}

#resultadoBox {
    margin-top: 25px;
    padding: 20px;
    background: white;
    border-radius: 15px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.15);
    font-size: 18px;
    font-weight: bold;
    display: none;
    animation: aparecer 0.5s ease;
}

@keyframes aparecer {
    from { transform: scale(0.8); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
}
</style>
</head>
<body>

<div id="container">
    <div id="seta"></div>
    <canvas id="roleta"></canvas>
    <button onclick="girar()">GIRAR</button>
    <div id="resultadoBox"></div>
</div>

<script>
const canvas = document.getElementById("roleta");
const ctx = canvas.getContext("2d");
const resultadoBox = document.getElementById("resultadoBox");

const tamanhoCanvas = 500;
canvas.width = tamanhoCanvas;
canvas.height = tamanhoCanvas;

const produtos = [
    "Produto 1",
    "Produto 2",
    "Produto 3",
    "Produto 4",
    "Produto 5",
    "Produto 6",
    "Produto 7",
    "Produto 8",
    "Produto 9",
    "Produto 10",
    "Produto 11"
];

const cores = [
    "#FF5733","#33FF57","#3357FF","#FF33A8","#A833FF",
    "#33FFF5","#FF8C33","#8CFF33","#FF3333","#33A8FF","#FFC300"
];

let anguloAtual = 0;
let girando = false;

function desenharRoleta() {
    const tamanho = produtos.length;
    const angulo = (2 * Math.PI) / tamanho;

    for (let i = 0; i < tamanho; i++) {
        ctx.beginPath();
        ctx.moveTo(250, 250);
        ctx.arc(250, 250, 250, i * angulo, (i + 1) * angulo);
        ctx.fillStyle = cores[i % cores.length];
        ctx.fill();
        ctx.save();
        ctx.translate(250, 250);
        ctx.rotate(i * angulo + angulo / 2);
        ctx.textAlign = "right";
        ctx.fillStyle = "#fff";
        ctx.font = "bold 16px Arial";
        ctx.fillText(produtos[i], 230, 10);
        ctx.restore();
    }
}

function girar() {
    if (girando) return;
    girando = true;
    resultadoBox.style.display = "none";

    const tempo = 4000;
    const inicio = performance.now();
    const rotacaoExtra = Math.random() * 2000 + 2000;

    function animar(agora) {
        const decorrido = agora - inicio;
        const progresso = decorrido / tempo;

        if (progresso < 1) {
            anguloAtual = rotacaoExtra * easeOut(progresso);
            desenharComRotacao();
            requestAnimationFrame(animar);
        } else {
            girando = false;
            mostrarResultado();
        }
    }

    requestAnimationFrame(animar);
}

function desenharComRotacao() {
    ctx.clearRect(0, 0, tamanhoCanvas, tamanhoCanvas);
    ctx.save();
    ctx.translate(250, 250);
    ctx.rotate(anguloAtual * Math.PI / 180);
    ctx.translate(-250, -250);
    desenharRoleta();
    ctx.restore();
}

function mostrarResultado() {
    const tamanho = produtos.length;
    const angulo = 360 / tamanho;
    const graus = (anguloAtual % 360);
    const indice = Math.floor((360 - graus) / angulo) % tamanho;

    resultadoBox.innerHTML = "ðŸŽ‰ PARABÃ‰NS!<br>VocÃª ganhou:<br><span style='color:#ff4d4d'>" + produtos[indice] + "</span>";
    resultadoBox.style.display = "block";
}

function easeOut(t) {
    return 1 - Math.pow(1 - t, 3);
}

desenharRoleta();
</script>

</body>
</html>
